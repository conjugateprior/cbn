<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using Your Own Items and Vectors • cbn</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using Your Own Items and Vectors">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cbn</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/alternative_statistics.html">Alternative Statistics</a>
    </li>
    <li>
      <a href="../articles/replication_replication.html">Replication Replication</a>
    </li>
    <li>
      <a href="../articles/using_your_own_vectors.html">Using Your Own Items and Vectors</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Using Your Own Items and Vectors</h1>
                        <h4 class="author">Will Lowe</h4>
            
            <h4 class="date">2019-06-25</h4>
      
      
      <div class="hidden name"><code>using_your_own_vectors.Rmd</code></div>

    </div>

    
    
<p>To run the statistics you’ll need your own items and your own vectors. The process has two parts</p>
<ol style="list-style-type: decimal">
<li>Acquire a list of words and associate them with a condition</li>
<li>Extract vectors for each word</li>
</ol>
<div id="associate-words-with-conditions" class="section level2">
<h2 class="hasAnchor">
<a href="#associate-words-with-conditions" class="anchor"></a>Associate words with conditions</h2>
<p>To see the format required for items (words) take a look at the item information from the first WEAT study</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">weat1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cbn_get_items.html">cbn_get_items</a></span>(<span class="dt">type =</span> <span class="st">"WEAT"</span>)</a></code></pre></div>
<p>the top of this data frame looks like</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">  Study Condition     Word   Role</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="dv">1</span> WEAT1   Flowers    aster target</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="dv">2</span> WEAT1   Flowers   clover target</a>
<a class="sourceLine" id="cb2-4" title="4"><span class="dv">3</span> WEAT1   Flowers hyacinth target</a>
<a class="sourceLine" id="cb2-5" title="5"><span class="dv">4</span> WEAT1   Flowers marigold target</a>
<a class="sourceLine" id="cb2-6" title="6"><span class="dv">5</span> WEAT1   Flowers    poppy target</a>
<a class="sourceLine" id="cb2-7" title="7"><span class="dv">6</span> WEAT1   Flowers   azalea target</a></code></pre></div>
<p>Here, the study is called <code>WEAT1</code>, the conditions are <code>Flowers</code>, <code>Insects</code>, the <code>target</code> roles, and <code>Pleasant</code> and <code>Unpleasant</code>, the <code>attribute</code> roles. The helper function <code>cbn_make_items</code> can be helpful for creating this structure for your own words. Naturally the words you have vectors for should match the words you have item information for.</p>
</div>
<div id="extract-vectors-for-each-word" class="section level2">
<h2 class="hasAnchor">
<a href="#extract-vectors-for-each-word" class="anchor"></a>Extract vectors for each word</h2>
<p>The <code>cbn</code> package bundles all the vectors you will need to replicate the paper analyses using the GloVe 840B 300-dimensional Common Crawl data. If, however, you want to work with different items you’ll need to point the package at your own file of word vectors. The process is:</p>
<ol style="list-style-type: decimal">
<li>Download and unpack a text file of word vectors</li>
<li>Point the package at the file of word vectors</li>
<li>Extract vectors for your choice of words</li>
<li>Analyze Your Vectors</li>
</ol>
<p>In the following I’ll assume that you still want to use the Common Crawl, but these instructions will work for any word vectors that arrive in the same file format. That format is essentially</p>
<pre><code>sausage 0.1234 -0.5555 1.4149</code></pre>
<p>i.e. word, space, float, space, float, space float … newline. This is what the code will assume when attempting to read things in.</p>
<div id="download-and-unpack-a-text-file-of-word-vectors" class="section level3">
<h3 class="hasAnchor">
<a href="#download-and-unpack-a-text-file-of-word-vectors" class="anchor"></a>Download and unpack a text file of word vectors</h3>
<p>If you want to use the GloVe Common Crawl data, then go to it’s homepage and download one of the files under ‘Download pre-trained word vectors’, e.g. <a href="http://nlp.stanford.edu/data/glove.840B.300d.zip" class="uri">http://nlp.stanford.edu/data/glove.840B.300d.zip</a></p>
<p>When download is complete, unzip the file. This should create a roughly 5G file called <code>glove.840B.300d.txt</code>. I’ll assume you downloaded it to <code>~/Documents</code>.</p>
</div>
<div id="point-the-package-at-the-file-of-word-vectors" class="section level3">
<h3 class="hasAnchor">
<a href="#point-the-package-at-the-file-of-word-vectors" class="anchor"></a>Point the package at the file of word vectors</h3>
<p>Load the package and assign this location</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(cbn)</a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw"><a href="../reference/cbn_set_vectorfile_location.html">cbn_set_vectorfile_location</a></span>(<span class="st">"~/Documents/glove.840B.300d.txt"</span>)</a></code></pre></div>
<p>You can retrieve this location using <code><a href="../reference/cbn_get_vectorfile_location.html">cbn_get_vectorfile_location()</a></code>. If you change your prefered vectors, just call it again with a new location. If you’d like this location to be remembered across R session add <code>persist = TRUE</code> to the function call.</p>
</div>
<div id="extract-vectors-for-your-choice-of-words" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-vectors-for-your-choice-of-words" class="anchor"></a>Extract vectors for your choice of words</h3>
<p>To get a matrix of vectors for your words</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">words &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Hugh"</span>, <span class="st">"Pugh"</span>, <span class="st">"Barney"</span>, <span class="st">"McGrew"</span>)</a>
<a class="sourceLine" id="cb5-2" title="2">mat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cbn_extract_word_vectors.html">cbn_extract_word_vectors</a></span>(words)</a></code></pre></div>
<p>By default there is no reporting, but for a couple of hundred words this function should return in around a minute for the 840B Common Crawl vectors.</p>
<p>If you want to watch progress, set <code>verbose</code> to TRUE. A second argument <code>report_every</code> controls how often a progress dot appears. It defaults to 100000 (lines).</p>
<p><code>mat</code> is a matrix with as many rows as <code>words</code> and as many column as the length of the vectors. Ifyou are using the vectors above that will be 300. The matrix has <code>words</code> as rownames and no column names. In the event that one of your words is not found in the vector file, the corresponding row of <code>mat</code> is filled with NAs.</p>
</div>
</div>
<div id="analyze-your-vectors" class="section level2">
<h2 class="hasAnchor">
<a href="#analyze-your-vectors" class="anchor"></a>Analyze your vectors</h2>
<p>With item information and corresponding vectors for your own words (or your own vectors) you can now use all the statistical functions described in the other vignettes.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#associate-words-with-conditions">Associate words with conditions</a></li>
      <li><a href="#extract-vectors-for-each-word">Extract vectors for each word</a></li>
      <li><a href="#analyze-your-vectors">Analyze your vectors</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Will Lowe.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
